import { setEnv } from './util'
import fetch from 'node-fetch'
//May need to switch to fastify server is fetch cannot handle specifying data
const env = setEnv()

export default async function getToken(token: string, tokensecret: string) {

    const response = await fetch(env.issuer_url, {
        method: "POST",
        body: `grant_type=client_credentials&client_id=${token}&client_secret=${tokensecret}`,
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "host":`${env.issuer_url}`
        },
    })
    console.log(response)

    return response
}

eyJraWQiOiJwdWJsaWM6YXBpLXNhbmRib3gtMiIsIng1dCI6Img1bnFJM2dBQm4wM3p2dGFfQVBMRVdZYm1LMCIsImFsZyI6IlJTMjU2In0.eyJpc3MiOiJodHRwczovL2FwaS5ieXUuZWR1IiwiZXhwIjoxNjg3ODc4NzYzLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL3N1YnNjcmliZXIiOiJCWVUveW9zaHV0Y2giLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2FwcGxpY2F0aW9uaWQiOiJmNjQ2Y2MzNi01NjM4LTQ1NzUtOWFlOC05NDM1OTYyYWY3MjkiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2FwcGxpY2F0aW9ubmFtZSI6ImY2NDZjYzM2LTU2MzgtNDU3NS05YWU4LTk0MzU5NjJhZjcyOSIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvYXBwbGljYXRpb250aWVyIjoiVW5saW1pdGVkIiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9hcGljb250ZXh0IjoiL2VjaG8vdjIiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL3ZlcnNpb24iOiJ2MiIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMvdGllciI6IlVubGltaXRlZCIsImh0dHA6Ly93c28yLm9yZy9jbGFpbXMva2V5dHlwZSI6IlNBTkRCT1giLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL3VzZXJ0eXBlIjoiQVBQTElDQVRJT04iLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2VuZHVzZXIiOiJ5b3NodXRjaEBjYXJib24uc3VwZXIiLCJodHRwOi8vd3NvMi5vcmcvY2xhaW1zL2VuZHVzZXJUZW5hbnRJZCI6Ii0xMjM0IiwiaHR0cDovL3dzbzIub3JnL2NsYWltcy9jbGllbnRfaWQiOiJmNjQ2Y2MzNi01NjM4LTQ1NzUtOWFlOC05NDM1OTYyYWY3MjkiLCJodHRwOi8vYnl1LmVkdS9jbGFpbXMvY2xpZW50X3N1YnNjcmliZXJfbmV0X2lkIjoieW9zaHV0Y2giLCJodHRwOi8vYnl1LmVkdS9jbGFpbXMvY2xpZW50X3BlcnNvbl9pZCI6Ijg4MjI5NTcwMiIsImh0dHA6Ly9ieXUuZWR1L2NsYWltcy9jbGllbnRfYnl1X2lkIjoiNjM0MzQyODM2IiwiaHR0cDovL2J5dS5lZHUvY2xhaW1zL2NsaWVudF9uZXRfaWQiOiIgIiwiaHR0cDovL2J5dS5lZHUvY2xhaW1zL2NsaWVudF9zdXJuYW1lIjoiU3R1ZGVudCBMaWZlIC0gQkRQIiwiaHR0cDovL2J5dS5lZHUvY2xhaW1zL2NsaWVudF9zdXJuYW1lX3Bvc2l0aW9uIjoiTCIsImh0dHA6Ly9ieXUuZWR1L2NsYWltcy9jbGllbnRfcmVzdF9vZl9uYW1lIjoiICIsImh0dHA6Ly9ieXUuZWR1L2NsYWltcy9jbGllbnRfcHJlZmVycmVkX2ZpcnN0X25hbWUiOiIgIiwiaHR0cDovL2J5dS5lZHUvY2xhaW1zL2NsaWVudF9zb3J0X25hbWUiOiJTdHVkZW50IExpZmUgLSBCRFAiLCJodHRwOi8vYnl1LmVkdS9jbGFpbXMvY2xpZW50X25hbWVfcHJlZml4IjoiICIsImh0dHA6Ly9ieXUuZWR1L2NsYWltcy9jbGllbnRfbmFtZV9zdWZmaXgiOiIgIiwiaHR0cDovL2J5dS5lZHUvY2xhaW1zL2NsaWVudF9jbGFpbV9zb3VyY2UiOiJDTElFTlRfSUQifQ.D5S-Hp9FP_nGUNXTdq2tDy611HjQDFzk0osqo4I7ygrA6Ej61owQh62k-V40qTv-m2-kY_qQvHZaNMQBdleLY7OG_IDRql5VMf6cGI2LYC84r4x2gngJUcgmel4XlX8ZTRSMFXI7STRtbnouz2alk-BK5NLstyli1Y-xkdQDr9EnM0-he7T1xs5Xwnrjl97OuY6MpUxo8DZwanMuCzYmixG_50u6hjtcULqUV_IquY8WptEc8aarsFlxyz0oJ3GFX5KVNLw51c8x3D-_AF1TWKmMZlqNZSrEdwf1Q7pP5rmfFSR6NL0AtCCs0QJesSTPn0tzAGoEaX13OjeWas8esVgUC5VM_FjbovYcfoyQoKQDtTzSaSiUjwxLatmltPBy8QmA90qBPLYcSqdkGJez1o1MSFmMusM6S4h3kfc8kPwhPpEGaOw10vvy9nVZCkZ0TmaIogOxFSgQn36Fmo5A42Zbsm562ltgjsw5Ek7oo-ayfsAQLm5CdY4wnSK4bvEu1Ezj1uVeOZAWOX7jqX-_h8-DTmWjwKIU5NQ0DdoBffm_f6LdZDndwr1QpfHp858qjRj7lzX_CZPtGf-P2WSZ_Ky1hcehw9PTYimLCc3xaQPXflxIFde8AdWVrSA2CdipD-My0rHL6v_IU4lKpv_ciuIXc-Oxou5NglAksyzR8Yw


/records/active_student_contact/v0
/records/deceased_students/v0
/records/student_academic_attributes/v0
/records/student_credit_hours/v0
/records/student_hiring_demographics/v0
/records/student_prioritized_program/v0

